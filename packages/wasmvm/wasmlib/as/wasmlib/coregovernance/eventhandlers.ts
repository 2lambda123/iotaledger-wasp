// Code generated by schema tool; DO NOT EDIT.

// Copyright 2020 IOTA Stiftung
// SPDX-License-Identifier: Apache-2.0

import * as wasmlib from '../index';
import * as wasmtypes from '../wasmtypes';

export class CoreGovernanceEventHandlers implements wasmlib.IEventHandlers {
    private myID: u32;
    private coreGovernanceHandlers: Map<string, (evt: CoreGovernanceEventHandlers, dec: wasmlib.WasmDecoder) => void> = new Map();

    /* eslint-disable @typescript-eslint/no-empty-function */
    rotate: (evt: EventRotate) => void = () => {};
    /* eslint-enable @typescript-eslint/no-empty-function */

    public constructor() {
        this.myID = wasmlib.eventHandlersGenerateID();
        this.coreGovernanceHandlers.set('coregovernance.rotate', (evt: CoreGovernanceEventHandlers, dec: wasmlib.WasmDecoder) => evt.rotate(new EventRotate(dec)));
    }

    public callHandler(topic: string, dec: wasmlib.WasmDecoder): void {
        const handler = this.coreGovernanceHandlers.get(topic);
        if (handler) {
            handler(this, dec);
        }
    }

    public id(): u32 {
        return this.myID;
    }

    public onCoreGovernanceRotate(handler: (evt: EventRotate) => void): void {
        this.rotate = handler;
    }
}

export class EventRotate {
    public readonly timestamp: u64;
    public readonly newAddr: wasmtypes.ScAddress;
    public readonly oldAddr: wasmtypes.ScAddress;

    public constructor(dec: wasmlib.WasmDecoder) {
        this.timestamp = wasmtypes.uint64Decode(dec);
        this.newAddr = wasmtypes.addressDecode(dec);
        this.oldAddr = wasmtypes.addressDecode(dec);
        dec.close();
    }
}
