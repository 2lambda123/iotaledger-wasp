package migrations

import (
	"encoding/hex"
	"testing"

	"github.com/stretchr/testify/require"
)

func TestM003CleanupBlockInfo(t *testing.T) {
	hexbytes := []string{
		// v0
		"707c061763234e170a0002000300ff00000000000000000000000000000000000000000000000000000000000000ffff000000000000000000000000000000000000000000000000000000000000426ef8e76ad6559e520ad377d0fd5727cbcb0b7612e319e1038db8bdee12e0baf1de5833e9aeccc901f16ff16858cb8c2864a5c7ab117496dbdc2b5b12b5963bf080c37cb399039492bd781be44e0df1ee0100000000000000020000000000000003000000000000000400000000000000",
		// v1
		"66a1bfa374234e170a00020003000000000000000000000000000000000000000000000000000000000000000000ffff0000000000000000000000000000000000000000000000000000000000000a14d2a267c84160c18ddc551c60cbf8ed7e688393e6178d96996dbeff37e2e51c8704485198f3ff01a2ddc412c03703f3c4d49b59a3f0c727a0596769ab6bae92091bfcb6f6277dbfd9e32463084e47740100000000000000020000000000000003000000000000000400000000000000",
	}
	for _, s := range hexbytes {
		oldBlockInfoBin, err := hex.DecodeString(s)
		require.NoError(t, err)
		_, err = m003ConvertBlockInfo(oldBlockInfoBin)
		require.NoError(t, err)
	}
}
